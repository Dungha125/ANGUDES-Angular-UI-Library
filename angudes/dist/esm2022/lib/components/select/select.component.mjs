import { Component, Input, Output, EventEmitter, forwardRef } from '@angular/core';
import { NG_VALUE_ACCESSOR } from '@angular/forms';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
export class SelectComponent {
    options = [];
    placeholder = 'Select an option';
    disabled = false;
    size = 'md';
    multiple = false;
    change = new EventEmitter();
    selectedValue = null;
    isOpen = false;
    onChange = (value) => { };
    onTouched = () => { };
    get displayText() {
        if (this.multiple && Array.isArray(this.selectedValue)) {
            return this.selectedValue.length > 0
                ? `${this.selectedValue.length} selected`
                : this.placeholder;
        }
        const option = this.options.find(opt => opt.value === this.selectedValue);
        return option ? option.label : this.placeholder;
    }
    toggle() {
        if (!this.disabled) {
            this.isOpen = !this.isOpen;
        }
    }
    selectOption(option) {
        if (option.disabled)
            return;
        if (this.multiple) {
            if (!Array.isArray(this.selectedValue)) {
                this.selectedValue = [];
            }
            const index = this.selectedValue.indexOf(option.value);
            if (index > -1) {
                this.selectedValue.splice(index, 1);
            }
            else {
                this.selectedValue.push(option.value);
            }
        }
        else {
            this.selectedValue = option.value;
            this.isOpen = false;
        }
        this.onChange(this.selectedValue);
        this.onTouched();
        this.change.emit(this.selectedValue);
    }
    isSelected(option) {
        if (this.multiple && Array.isArray(this.selectedValue)) {
            return this.selectedValue.includes(option.value);
        }
        return this.selectedValue === option.value;
    }
    writeValue(value) {
        this.selectedValue = value;
    }
    registerOnChange(fn) {
        this.onChange = fn;
    }
    registerOnTouched(fn) {
        this.onTouched = fn;
    }
    setDisabledState(isDisabled) {
        this.disabled = isDisabled;
    }
    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "18.2.14", ngImport: i0, type: SelectComponent, deps: [], target: i0.ɵɵFactoryTarget.Component });
    static ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "18.2.14", type: SelectComponent, selector: "agu-select", inputs: { options: "options", placeholder: "placeholder", disabled: "disabled", size: "size", multiple: "multiple" }, outputs: { change: "change" }, providers: [
            {
                provide: NG_VALUE_ACCESSOR,
                useExisting: forwardRef(() => SelectComponent),
                multi: true
            }
        ], ngImport: i0, template: "<div class=\"agu-select\" [ngClass]=\"{'disabled': disabled, 'open': isOpen, 'size-sm': size === 'sm', 'size-md': size === 'md', 'size-lg': size === 'lg'}\">\r\n  <div class=\"select-trigger\" (click)=\"toggle()\">\r\n    <span class=\"select-value\" [ngClass]=\"{'placeholder': !selectedValue}\">{{ displayText }}</span>\r\n    <svg class=\"select-arrow\" [ngClass]=\"{'open': isOpen}\" viewBox=\"0 0 12 12\" fill=\"none\">\r\n      <path d=\"M3 4.5L6 7.5L9 4.5\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n    </svg>\r\n  </div>\r\n  <div class=\"select-dropdown\" *ngIf=\"isOpen\">\r\n    <div \r\n      class=\"select-option\" \r\n      *ngFor=\"let option of options\"\r\n      [ngClass]=\"{'selected': isSelected(option), 'disabled': option.disabled}\"\r\n      (click)=\"selectOption(option)\"\r\n    >\r\n      <span *ngIf=\"multiple\" class=\"option-checkbox\">\r\n        <svg *ngIf=\"isSelected(option)\" viewBox=\"0 0 16 16\" fill=\"none\">\r\n          <path d=\"M13.5 4L6 11.5L2.5 8\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n        </svg>\r\n      </span>\r\n      <span class=\"option-label\">{{ option.label }}</span>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n", styles: [".agu-select{position:relative;display:inline-block;width:100%;min-width:200px}.agu-select.disabled{opacity:.6;cursor:not-allowed}.agu-select .select-trigger{display:flex;align-items:center;justify-content:space-between;padding:.5rem .75rem;border:1px solid #d1d5db;border-radius:.375rem;background:#fff;cursor:pointer;transition:all .2s ease;gap:.5rem}.agu-select .select-trigger:hover:not(.disabled){border-color:#1890ff}.agu-select .select-trigger .select-value{flex:1;color:#374151;font-size:.875rem}.agu-select .select-trigger .select-value.placeholder{color:#9ca3af}.agu-select .select-trigger .select-arrow{width:12px;height:12px;color:#6b7280;transition:transform .2s ease;flex-shrink:0}.agu-select .select-trigger .select-arrow.open{transform:rotate(180deg)}.agu-select.open .select-trigger{border-color:#1890ff;box-shadow:0 0 0 3px #1890ff1a}.agu-select .select-dropdown{position:absolute;top:100%;left:0;right:0;margin-top:.25rem;background:#fff;border:1px solid #d1d5db;border-radius:.375rem;box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f;max-height:200px;overflow-y:auto;z-index:1000}.agu-select .select-option{display:flex;align-items:center;padding:.5rem .75rem;cursor:pointer;transition:background-color .15s ease;gap:.5rem}.agu-select .select-option:hover:not(.disabled){background-color:#f3f4f6}.agu-select .select-option.selected{background-color:#1890ff1a;color:#1890ff}.agu-select .select-option.disabled{opacity:.5;cursor:not-allowed}.agu-select .select-option .option-checkbox{display:inline-flex;align-items:center;justify-content:center;width:16px;height:16px;border:2px solid #d1d5db;border-radius:3px;flex-shrink:0}.agu-select .select-option .option-checkbox svg{width:12px;height:12px;color:#1890ff}.agu-select .select-option.selected .option-checkbox{background-color:#1890ff;border-color:#1890ff}.agu-select .select-option.selected .option-checkbox svg{color:#fff}.agu-select .select-option .option-label{flex:1;font-size:.875rem}.agu-select.size-sm .select-trigger,.agu-select.size-sm .select-option{padding:.375rem .5rem;font-size:.75rem}.agu-select.size-lg .select-trigger,.agu-select.size-lg .select-option{padding:.75rem 1rem;font-size:1rem}\n"], dependencies: [{ kind: "directive", type: i1.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { kind: "directive", type: i1.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i1.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }] });
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.2.14", ngImport: i0, type: SelectComponent, decorators: [{
            type: Component,
            args: [{ selector: 'agu-select', standalone: false, providers: [
                        {
                            provide: NG_VALUE_ACCESSOR,
                            useExisting: forwardRef(() => SelectComponent),
                            multi: true
                        }
                    ], template: "<div class=\"agu-select\" [ngClass]=\"{'disabled': disabled, 'open': isOpen, 'size-sm': size === 'sm', 'size-md': size === 'md', 'size-lg': size === 'lg'}\">\r\n  <div class=\"select-trigger\" (click)=\"toggle()\">\r\n    <span class=\"select-value\" [ngClass]=\"{'placeholder': !selectedValue}\">{{ displayText }}</span>\r\n    <svg class=\"select-arrow\" [ngClass]=\"{'open': isOpen}\" viewBox=\"0 0 12 12\" fill=\"none\">\r\n      <path d=\"M3 4.5L6 7.5L9 4.5\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n    </svg>\r\n  </div>\r\n  <div class=\"select-dropdown\" *ngIf=\"isOpen\">\r\n    <div \r\n      class=\"select-option\" \r\n      *ngFor=\"let option of options\"\r\n      [ngClass]=\"{'selected': isSelected(option), 'disabled': option.disabled}\"\r\n      (click)=\"selectOption(option)\"\r\n    >\r\n      <span *ngIf=\"multiple\" class=\"option-checkbox\">\r\n        <svg *ngIf=\"isSelected(option)\" viewBox=\"0 0 16 16\" fill=\"none\">\r\n          <path d=\"M13.5 4L6 11.5L2.5 8\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n        </svg>\r\n      </span>\r\n      <span class=\"option-label\">{{ option.label }}</span>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n", styles: [".agu-select{position:relative;display:inline-block;width:100%;min-width:200px}.agu-select.disabled{opacity:.6;cursor:not-allowed}.agu-select .select-trigger{display:flex;align-items:center;justify-content:space-between;padding:.5rem .75rem;border:1px solid #d1d5db;border-radius:.375rem;background:#fff;cursor:pointer;transition:all .2s ease;gap:.5rem}.agu-select .select-trigger:hover:not(.disabled){border-color:#1890ff}.agu-select .select-trigger .select-value{flex:1;color:#374151;font-size:.875rem}.agu-select .select-trigger .select-value.placeholder{color:#9ca3af}.agu-select .select-trigger .select-arrow{width:12px;height:12px;color:#6b7280;transition:transform .2s ease;flex-shrink:0}.agu-select .select-trigger .select-arrow.open{transform:rotate(180deg)}.agu-select.open .select-trigger{border-color:#1890ff;box-shadow:0 0 0 3px #1890ff1a}.agu-select .select-dropdown{position:absolute;top:100%;left:0;right:0;margin-top:.25rem;background:#fff;border:1px solid #d1d5db;border-radius:.375rem;box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f;max-height:200px;overflow-y:auto;z-index:1000}.agu-select .select-option{display:flex;align-items:center;padding:.5rem .75rem;cursor:pointer;transition:background-color .15s ease;gap:.5rem}.agu-select .select-option:hover:not(.disabled){background-color:#f3f4f6}.agu-select .select-option.selected{background-color:#1890ff1a;color:#1890ff}.agu-select .select-option.disabled{opacity:.5;cursor:not-allowed}.agu-select .select-option .option-checkbox{display:inline-flex;align-items:center;justify-content:center;width:16px;height:16px;border:2px solid #d1d5db;border-radius:3px;flex-shrink:0}.agu-select .select-option .option-checkbox svg{width:12px;height:12px;color:#1890ff}.agu-select .select-option.selected .option-checkbox{background-color:#1890ff;border-color:#1890ff}.agu-select .select-option.selected .option-checkbox svg{color:#fff}.agu-select .select-option .option-label{flex:1;font-size:.875rem}.agu-select.size-sm .select-trigger,.agu-select.size-sm .select-option{padding:.375rem .5rem;font-size:.75rem}.agu-select.size-lg .select-trigger,.agu-select.size-lg .select-option{padding:.75rem 1rem;font-size:1rem}\n"] }]
        }], propDecorators: { options: [{
                type: Input
            }], placeholder: [{
                type: Input
            }], disabled: [{
                type: Input
            }], size: [{
                type: Input
            }], multiple: [{
                type: Input
            }], change: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VsZWN0LmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL2FuZ3VkZXMvc3JjL2xpYi9jb21wb25lbnRzL3NlbGVjdC9zZWxlY3QuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvYW5ndWRlcy9zcmMvbGliL2NvbXBvbmVudHMvc2VsZWN0L3NlbGVjdC5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsWUFBWSxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUNuRixPQUFPLEVBQXdCLGlCQUFpQixFQUFFLE1BQU0sZ0JBQWdCLENBQUM7OztBQXFCekUsTUFBTSxPQUFPLGVBQWU7SUFDakIsT0FBTyxHQUFtQixFQUFFLENBQUM7SUFDN0IsV0FBVyxHQUFXLGtCQUFrQixDQUFDO0lBQ3pDLFFBQVEsR0FBWSxLQUFLLENBQUM7SUFDMUIsSUFBSSxHQUF1QixJQUFJLENBQUM7SUFDaEMsUUFBUSxHQUFZLEtBQUssQ0FBQztJQUN6QixNQUFNLEdBQUcsSUFBSSxZQUFZLEVBQU8sQ0FBQztJQUUzQyxhQUFhLEdBQVEsSUFBSSxDQUFDO0lBQzFCLE1BQU0sR0FBWSxLQUFLLENBQUM7SUFDaEIsUUFBUSxHQUFHLENBQUMsS0FBVSxFQUFFLEVBQUUsR0FBRSxDQUFDLENBQUM7SUFDOUIsU0FBUyxHQUFHLEdBQUcsRUFBRSxHQUFFLENBQUMsQ0FBQztJQUU3QixJQUFJLFdBQVc7UUFDYixJQUFJLElBQUksQ0FBQyxRQUFRLElBQUksS0FBSyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLEVBQUUsQ0FBQztZQUN2RCxPQUFPLElBQUksQ0FBQyxhQUFhLENBQUMsTUFBTSxHQUFHLENBQUM7Z0JBQ2xDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxh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QkgsaXhDQXdCQTs7NEZERmEsZUFBZTtrQkFiM0IsU0FBUzsrQkFDRSxZQUFZLGNBQ1YsS0FBSyxhQUdOO3dCQUNUOzRCQUNFLE9BQU8sRUFBRSxpQkFBaUI7NEJBQzFCLFdBQVcsRUFBRSxVQUFVLENBQUMsR0FBRyxFQUFFLGdCQUFnQixDQUFDOzRCQUM5QyxLQUFLLEVBQUUsSUFBSTt5QkFDWjtxQkFDRjs4QkFHUSxPQUFPO3NCQUFmLEtBQUs7Z0JBQ0csV0FBVztzQkFBbkIsS0FBSztnQkFDRyxRQUFRO3NCQUFoQixLQUFLO2dCQUNHLElBQUk7c0JBQVosS0FBSztnQkFDRyxRQUFRO3NCQUFoQixLQUFLO2dCQUNJLE1BQU07c0JBQWYsTUFBTSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgSW5wdXQsIE91dHB1dCwgRXZlbnRFbWl0dGVyLCBmb3J3YXJkUmVmIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IENvbnRyb2xWYWx1ZUFjY2Vzc29yLCBOR19WQUxVRV9BQ0NFU1NPUiB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU2VsZWN0T3B0aW9uIHtcclxuICBsYWJlbDogc3RyaW5nO1xyXG4gIHZhbHVlOiBhbnk7XHJcbiAgZGlzYWJsZWQ/OiBib29sZWFuO1xyXG59XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ2FndS1zZWxlY3QnLFxyXG4gIHN0YW5kYWxvbmU6IGZhbHNlLFxyXG4gIHRlbXBsYXRlVXJsOiAnLi9zZWxlY3QuY29tcG9uZW50Lmh0bWwnLFxyXG4gIHN0eWxlVXJsOiAnLi9zZWxlY3QuY29tcG9uZW50LnNjc3MnLFxyXG4gIHByb3ZpZGVyczogW1xyXG4gICAge1xyXG4gICAgICBwcm92aWRlOiBOR19WQUxVRV9BQ0NFU1NPUixcclxuICAgICAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gU2VsZWN0Q29tcG9uZW50KSxcclxuICAgICAgbXVsdGk6IHRydWVcclxuICAgIH1cclxuICBdXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBTZWxlY3RDb21wb25lbnQgaW1wbGVtZW50cyBDb250cm9sVmFsdWVBY2Nlc3NvciB7XHJcbiAgQElucHV0KCkgb3B0aW9uczogU2VsZWN0T3B0aW9uW10gPSBbXTtcclxuICBASW5wdXQoKSBwbGFjZWhvbGRlcjogc3RyaW5nID0gJ1NlbGVjdCBhbiBvcHRpb24nO1xyXG4gIEBJbnB1dCgpIGRpc2FibGVkOiBib29sZWFuID0gZmFsc2U7XHJcbiAgQElucHV0KCkgc2l6ZTogJ3NtJyB8ICdtZCcgfCAnbGcnID0gJ21kJztcclxuICBASW5wdXQoKSBtdWx0aXBsZTogYm9vbGVhbiA9IGZhbHNlO1xyXG4gIEBPdXRwdXQoKSBjaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuXHJcbiAgc2VsZWN0ZWRWYWx1ZTogYW55ID0gbnVsbDtcclxuICBpc09wZW46IGJvb2xlYW4gPSBmYWxzZTtcclxuICBwcml2YXRlIG9uQ2hhbmdlID0gKHZhbHVlOiBhbnkpID0+IHt9O1xyXG4gIHByaXZhdGUgb25Ub3VjaGVkID0gKCkgPT4ge307XHJcblxyXG4gIGdldCBkaXNwbGF5VGV4dCgpOiBzdHJpbmcge1xyXG4gICAgaWYgKHRoaXMubXVsdGlwbGUgJiYgQXJyYXkuaXNBcnJheSh0aGlzLnNlbGVjdGVkVmFsdWUpKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLnNlbGVjdGVkVmFsdWUubGVuZ3RoID4gMCBcclxuICAgICAgICA/IGAke3RoaXMuc2VsZWN0ZWRWYWx1ZS5sZW5ndGh9IHNlbGVjdGVkYFxyXG4gICAgICAgIDogdGhpcy5wbGFjZWhvbGRlcjtcclxuICAgIH1cclxuICAgIGNvbnN0IG9wdGlvbiA9IHRoaXMub3B0aW9ucy5maW5kKG9wdCA9PiBvcHQudmFsdWUgPT09IHRoaXMuc2VsZWN0ZWRWYWx1ZSk7XHJcbiAgICByZXR1cm4gb3B0aW9uID8gb3B0aW9uLmxhYmVsIDogdGhpcy5wbGFjZWhvbGRlcjtcclxuICB9XHJcblxyXG4gIHRvZ2dsZSgpOiB2b2lkIHtcclxuICAgIGlmICghdGhpcy5kaXNhYmxlZCkge1xyXG4gICAgICB0aGlzLmlzT3BlbiA9ICF0aGlzLmlzT3BlbjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNlbGVjdE9wdGlvbihvcHRpb246IFNlbGVjdE9wdGlvbik6IHZvaWQge1xyXG4gICAgaWYgKG9wdGlvbi5kaXNhYmxlZCkgcmV0dXJuO1xyXG5cclxuICAgIGlmICh0aGlzLm11bHRpcGxlKSB7XHJcbiAgICAgIGlmICghQXJyYXkuaXNBcnJheSh0aGlzLnNlbGVjdGVkVmFsdWUpKSB7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZFZhbHVlID0gW107XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgaW5kZXggPSB0aGlzLnNlbGVjdGVkVmFsdWUuaW5kZXhPZihvcHRpb24udmFsdWUpO1xyXG4gICAgICBpZiAoaW5kZXggPiAtMSkge1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRWYWx1ZS5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRWYWx1ZS5wdXNoKG9wdGlvbi52YWx1ZSk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuc2VsZWN0ZWRWYWx1ZSA9IG9wdGlvbi52YWx1ZTtcclxuICAgICAgdGhpcy5pc09wZW4gPSBmYWxzZTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgdGhpcy5vbkNoYW5nZSh0aGlzLnNlbGVjdGVkVmFsdWUpO1xyXG4gICAgdGhpcy5vblRvdWNoZWQoKTtcclxuICAgIHRoaXMuY2hhbmdlLmVtaXQodGhpcy5zZWxlY3RlZFZhbHVlKTtcclxuICB9XHJcblxyXG4gIGlzU2VsZWN0ZWQob3B0aW9uOiBTZWxlY3RPcHRpb24pOiBib29sZWFuIHtcclxuICAgIGlmICh0aGlzLm11bHRpcGxlICYmIEFycmF5LmlzQXJyYXkodGhpcy5zZWxlY3RlZFZhbHVlKSkge1xyXG4gICAgICByZXR1cm4gdGhpcy5zZWxlY3RlZFZhbHVlLmluY2x1ZGVzKG9wdGlvbi52YWx1ZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5zZWxlY3RlZFZhbHVlID09PSBvcHRpb24udmFsdWU7XHJcbiAgfVxyXG5cclxuICB3cml0ZVZhbHVlKHZhbHVlOiBhbnkpOiB2b2lkIHtcclxuICAgIHRoaXMuc2VsZWN0ZWRWYWx1ZSA9IHZhbHVlO1xyXG4gIH1cclxuXHJcbiAgcmVnaXN0ZXJPbkNoYW5nZShmbjogKHZhbHVlOiBhbnkpID0+IHZvaWQpOiB2b2lkIHtcclxuICAgIHRoaXMub25DaGFuZ2UgPSBmbjtcclxuICB9XHJcblxyXG4gIHJlZ2lzdGVyT25Ub3VjaGVkKGZuOiAoKSA9PiB2b2lkKTogdm9pZCB7XHJcbiAgICB0aGlzLm9uVG91Y2hlZCA9IGZuO1xyXG4gIH1cclxuXHJcbiAgc2V0RGlzYWJsZWRTdGF0ZShpc0Rpc2FibGVkOiBib29sZWFuKTogdm9pZCB7XHJcbiAgICB0aGlzLmRpc2FibGVkID0gaXNEaXNhYmxlZDtcclxuICB9XHJcbn1cclxuXHJcbiIsIjxkaXYgY2xhc3M9XCJhZ3Utc2VsZWN0XCIgW25nQ2xhc3NdPVwieydkaXNhYmxlZCc6IGRpc2FibGVkLCAnb3Blbic6IGlzT3BlbiwgJ3NpemUtc20nOiBzaXplID09PSAnc20nLCAnc2l6ZS1tZCc6IHNpemUgPT09ICdtZCcsICdzaXplLWxnJzogc2l6ZSA9PT0gJ2xnJ31cIj5cclxuICA8ZGl2IGNsYXNzPVwic2VsZWN0LXRyaWdnZXJcIiAoY2xpY2spPVwidG9nZ2xlKClcIj5cclxuICAgIDxzcGFuIGNsYXNzPVwic2VsZWN0LXZhbHVlXCIgW25nQ2xhc3NdPVwieydwbGFjZWhvbGRlcic6ICFzZWxlY3RlZFZhbHVlfVwiPnt7IGRpc3BsYXlUZXh0IH19PC9zcGFuPlxyXG4gICAgPHN2ZyBjbGFzcz1cInNlbGVjdC1hcnJvd1wiIFtuZ0NsYXNzXT1cInsnb3Blbic6IGlzT3Blbn1cIiB2aWV3Qm94PVwiMCAwIDEyIDEyXCIgZmlsbD1cIm5vbmVcIj5cclxuICAgICAgPHBhdGggZD1cIk0zIDQuNUw2IDcuNUw5IDQuNVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjEuNVwiIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiLz5cclxuICAgIDwvc3ZnPlxyXG4gIDwvZGl2PlxyXG4gIDxkaXYgY2xhc3M9XCJzZWxlY3QtZHJvcGRvd25cIiAqbmdJZj1cImlzT3BlblwiPlxyXG4gICAgPGRpdiBcclxuICAgICAgY2xhc3M9XCJzZWxlY3Qtb3B0aW9uXCIgXHJcbiAgICAgICpuZ0Zvcj1cImxldCBvcHRpb24gb2Ygb3B0aW9uc1wiXHJcbiAgICAgIFtuZ0NsYXNzXT1cInsnc2VsZWN0ZWQnOiBpc1NlbGVjdGVkKG9wdGlvbiksICdkaXNhYmxlZCc6IG9wdGlvbi5kaXNhYmxlZH1cIlxyXG4gICAgICAoY2xpY2spPVwic2VsZWN0T3B0aW9uKG9wdGlvbilcIlxyXG4gICAgPlxyXG4gICAgICA8c3BhbiAqbmdJZj1cIm11bHRpcGxlXCIgY2xhc3M9XCJvcHRpb24tY2hlY2tib3hcIj5cclxuICAgICAgICA8c3ZnICpuZ0lmPVwiaXNTZWxlY3RlZChvcHRpb24pXCIgdmlld0JveD1cIjAgMCAxNiAxNlwiIGZpbGw9XCJub25lXCI+XHJcbiAgICAgICAgICA8cGF0aCBkPVwiTTEzLjUgNEw2IDExLjVMMi41IDhcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIyXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCIvPlxyXG4gICAgICAgIDwvc3ZnPlxyXG4gICAgICA8L3NwYW4+XHJcbiAgICAgIDxzcGFuIGNsYXNzPVwib3B0aW9uLWxhYmVsXCI+e3sgb3B0aW9uLmxhYmVsIH19PC9zcGFuPlxyXG4gICAgPC9kaXY+XHJcbiAgPC9kaXY+XHJcbjwvZGl2PlxyXG5cclxuIl19